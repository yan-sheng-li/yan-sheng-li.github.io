(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{537:function(a,t,s){"use strict";s.r(t);var e=s(1),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"多个方式启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多个方式启动服务"}},[a._v("#")]),a._v(" 多个方式启动服务")]),a._v(" "),t("blockquote",[t("p",[a._v("每次用到kafka时都会出现各种奇怪的问题，综合实践，下面汇总下主要操作步骤：")])]),a._v(" "),t("h2",{attrs:{id:"docker镜像形式启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像形式启动"}},[a._v("#")]),a._v(" Docker镜像形式启动")]),a._v(" "),t("h3",{attrs:{id:"zookeeper启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper启动"}},[a._v("#")]),a._v(" zookeeper启动")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" zookeeper "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v(":2181 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" wurstmeister/zookeeper\n")])])]),t("h3",{attrs:{id:"kafka启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka启动"}},[a._v("#")]),a._v(" kafka启动")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" kafka01 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(":9092 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_BROKER_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_ZOOKEEPER_CONNECT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("150.158")]),a._v(".16.123:12348 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_ADVERTISED_LISTENERS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAINTEXT://150.158.16.123:9092 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KAFKA_LISTENERS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAINTEXT://0.0.0.0:9092 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("  wurstmeister/kafka\n")])])]),t("h3",{attrs:{id:"进入kafka容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入kafka容器"}},[a._v("#")]),a._v(" 进入kafka容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("容器id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" /bin/bash\n")])])]),t("p",[a._v("创建topic")]),a._v(" "),t("p",[a._v("进入容器，在"),t("code",[a._v("/opt/kafka_2.13-2.8.1/bin")]),a._v(" 目录下创建topic")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("./kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--create")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zookeeper")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("150.158")]),a._v(".16.123:12348 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--partitions")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" mykafka\n./kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--create")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zookeeper")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("150.158")]),a._v(".16.123:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--partitions")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" mykafka\n")])])]),t("p",[a._v("运行生产者")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220923112024973.png",alt:"image-20220923112024973"}})]),a._v(" "),t("p",[a._v("运行消费者")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220923112035890.png",alt:"image-20220923112035890"}})]),a._v(" "),t("hr"),a._v(" "),t("h2",{attrs:{id:"单机形式启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单机形式启动"}},[a._v("#")]),a._v(" 单机形式启动")]),a._v(" "),t("h3",{attrs:{id:"前提"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前提"}},[a._v("#")]),a._v(" 前提")]),a._v(" "),t("p",[a._v("1、Linux 机器")]),a._v(" "),t("p",[a._v("2、环境已准备好JDK，如果还没有装，推荐用yum一键安装")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("yum  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("  java-1.8.0-openjdk.x86_64\n")])])]),t("p",[a._v("检验：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# java -version")]),a._v("\nopenjdk version "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.8.0_362"')]),a._v("\nOpenJDK Runtime Environment "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("build "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),a._v(".0_362-b08"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nOpenJDK "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("build "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25.362")]),a._v("-b08, mixed mode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("3、将kafka压缩包上传到你的Linux")]),a._v(" "),t("p",[a._v("配置文件关注"),t("code",[a._v("config")]),a._v("目录下的"),t("code",[a._v("zookeeper.properties")]),a._v("和"),t("code",[a._v("server.properties")]),a._v("，启动服务时要指定")]),a._v(" "),t("h3",{attrs:{id:"配置-启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-启动"}},[a._v("#")]),a._v(" 配置-启动")]),a._v(" "),t("p",[a._v("有默认配置，可不做修改（有需要可以自定义启动端口和数据存放位置等参数）")]),a._v(" "),t("p",[a._v("1、先启动自带的 Zookeeper：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./zookeeper-server-start.sh ../config/zookeeper.properties ")]),a._v("\nOpenJDK "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM warning: If the number of processors is expected to increase from one, "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v(" you should configure the number of parallel GC threads appropriately using "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:ParallelGCThreads")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("N\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,759"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Reading configuration from: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/config/zookeeper.properties "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.quorum.QuorumPeerConfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,766"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO autopurge.snapRetainCount "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" to "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.DatadirCleanupManager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,767"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO autopurge.purgeInterval "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" to "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.DatadirCleanupManager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,767"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Purge task is not scheduled. "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.DatadirCleanupManager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,767"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" WARN Either no config or no quorum defined "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" config, running  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" standalone mode "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.quorum.QuorumPeerMain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,783"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Reading configuration from: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/config/zookeeper.properties "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.quorum.QuorumPeerConfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,784"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Starting server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.ZooKeeperServerMain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,796"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Server environment:zookeeper.version"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.4")]),a._v(".14-4c25d480e66aadd371de8bd2fd8da255ac140bcf, built on 03/06/2019 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(":18 GMT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.ZooKeeperServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,796"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Server environment:host.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.ZooKeeperServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,796"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Server environment:java.version"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),a._v(".0_362 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.ZooKeeperServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,796"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Server environment:java.vendor"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Red Hat, Inc. "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.ZooKeeperServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":14:52,796"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Server environment:java.home"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b08-1.el7_9.x86_64/jre "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.server.ZooKeeperServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("省略大部分"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("2、启动 Kafka")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost kafka_2.12-2.3.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# bin/kafka-server-start.sh config/server.properties ")]),a._v("\nOpenJDK "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM warning: If the number of processors is expected to increase from one, "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v(" you should configure the number of parallel GC threads appropriately using "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:ParallelGCThreads")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("N\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:00,261"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Registered kafka:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("kafka.Log4jController MBean "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("kafka.utils.Log4jControllerRegistration$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,004"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Registered signal handlers "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("TERM")]),a._v(", INT, HUP "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.kafka.common.utils.LoggingSignalHandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,024"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO starting "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("kafka.server.KafkaServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,025"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Connecting to zookeeper on localhost:2181 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("kafka.server.KafkaServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,068"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ZooKeeperClient Kafka server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Initializing a new session to localhost:2181. "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("kafka.zookeeper.ZooKeeperClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,072"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Client environment:zookeeper.version"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.4")]),a._v(".14-4c25d480e66aadd371de8bd2fd8da255ac140bcf, built on 03/06/2019 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(":18 GMT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.ZooKeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,072"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Client environment:host.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.ZooKeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,072"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Client environment:java.version"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),a._v(".0_362 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.ZooKeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,072"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Client environment:java.vendor"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Red Hat, Inc. "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.ZooKeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-26 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(":16:01,072"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" INFO Client environment:java.home"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b08-1.el7_9.x86_64/jre "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("org.apache.zookeeper.ZooKeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("省略大部分"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("上述步骤只要启动过程没有报错信息，一般是没有问题的")])]),a._v(" "),t("h3",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[a._v("#")]),a._v(" 测试")]),a._v(" "),t("p",[a._v("1、创建个topic")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./kafka-topics.sh --create --zookeeper 192.168.154.134:2181 --replication-factor 1 --partitions 1 --topic test")]),a._v("\nCreated topic test.\n")])])]),t("p",[a._v("2、查看topic列表")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./kafka-topics.sh --zookeeper 192.168.154.134:2181 --list")]),a._v("\nOpenJDK "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM warning: If the number of processors is expected to increase from one, "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v(" you should configure the number of parallel GC threads appropriately using "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XX:ParallelGCThreads")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("N\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n")])])]),t("p",[a._v("3、启动生产者")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./kafka-console-producer.sh --broker-list 192.168.154.134:9092 --topic test")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hi\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("什么意思啊\n")])])]),t("p",[a._v("4、启动消费者")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./kafka-console-consumer.sh --bootstrap-server 192.168.154.134:9092 --topic test")]),a._v("\nhi\n什么意思啊\n")])])]),t("blockquote",[t("p",[a._v("正常启动，OK！")])]),a._v(" "),t("h2",{attrs:{id:"可视化-kafka-manager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#可视化-kafka-manager"}},[a._v("#")]),a._v(" 可视化：kafka-manager")]),a._v(" "),t("h3",{attrs:{id:"镜像下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像下载"}},[a._v("#")]),a._v(" 镜像下载")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull sheepkiller/kafka-manager\n")])])]),t("h3",{attrs:{id:"运行容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行容器"}},[a._v("#")]),a._v(" 运行容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" kafka-manager "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12349")]),a._v(":9000 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--link")]),a._v(" zookeeper "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--link")]),a._v(" kafka01 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZK_HOSTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zookeeper:2181 sheepkiller/kafka-manager  \n")])])]),t("p",[a._v("然后访问对应的"),t("code",[a._v("IP：端口")]),a._v("即可进入管理页面")]),a._v(" "),t("blockquote",[t("p",[a._v("注意："),t("code",[a._v("ZK_HOSTS")]),a._v(" 后面在web页面上要用到！")])]),a._v(" "),t("h3",{attrs:{id:"管理界面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#管理界面"}},[a._v("#")]),a._v(" 管理界面")]),a._v(" "),t("p",[a._v("进入主页面后，点击 "),t("code",[a._v("Add Cluster")]),a._v(" 添加集群信息")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220818233716973.png",alt:"image-20220818233716973"}})]),a._v(" "),t("p",[a._v("然后填写配置信息，主要填写集群名称，Zookeeper的Hosts，还有指定kafka版本（选个跟你所使用的kafka版本号最接近的就行），其他的一些配置按默认的就行。")]),a._v(" "),t("p",[a._v("当你正确连接上以后，就能看到你的集群啦，如：")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220818235108897.png",alt:"image-20220818235108897"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220818235134261.png",alt:"image-20220818235134261"}})]),a._v(" "),t("p",[t("strong",[a._v("更多关于kafka可视化操作就由你慢慢探索吧！这里将你引进门！")])]),a._v(" "),t("blockquote",[t("p",[a._v("注意：")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("如果你在启动"),t("code",[a._v("kafka manager")]),a._v("这个容器时指定了 "),t("code",[a._v("ZK_HOSTS")]),a._v(" ，那么"),t("strong",[a._v("Cluster Zookeeper Hosts")]),a._v("这项填的内容要和 "),t("code",[a._v("ZK_HOSTS")]),a._v(" 一致，否则会出现连接不上，连接超时等情况。如下图：")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220818234605319.png",alt:"image-20220818234605319"}})])]),a._v(" "),t("li",[t("p",[a._v("另外有些配置默认值是1，但是你得将其改成1以上的整数，否则不能正确保存提交。如：")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220818234844587.png",alt:"image-20220818234844587"}})])])])]),a._v(" "),t("hr"),a._v(" "),t("h2",{attrs:{id:"注意"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[a._v("#")]),a._v(" 注意")]),a._v(" "),t("p",[a._v("kafka版本不同，响应的api有区别")]),a._v(" "),t("p",[a._v("本版本是2.11")]),a._v(" "),t("p",[a._v("注意3.x是 --bootstrap-server localhost:9092方式新建，kafka2.x是以--zookeeper方式创建。下面查看新建的topic。")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220925165659756.png",alt:"image-20220925165659756"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20220925165713665.png",alt:"image-20220925165713665"}})]),a._v(" "),t("h2",{attrs:{id:"奇葩问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#奇葩问题"}},[a._v("#")]),a._v(" 奇葩问题")]),a._v(" "),t("h3",{attrs:{id:"_1-重启docker失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-重启docker失败"}},[a._v("#")]),a._v(" 1.重启docker失败？")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# systemctl restart docker")]),a._v("\nJob "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" docker.service failed because the control process exited with error code. See "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"systemctl status docker.service"')]),a._v(" and "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"journalctl -xe"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" details.\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# journalctl -xe")]),a._v("\n-- The result is failed.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:53 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": Unit docker.service entered failed state.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:53 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": Unit docker.service entered failed state.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:53 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": docker.service failed.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:55 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": docker.service holdoff "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" over, scheduling restart.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:55 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": Stopped Docker Application Container Engine.\n-- Subject: Unit docker.service has finished shutting down\n-- Defined-By: systemd\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\n-- \n-- Unit docker.service has finished shutting down.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:55 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": start request repeated too quickly "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" docker.service\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" 02:01:55 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": Failed to start Docker Application Container Engine.\n-- Subject: Unit docker.service has failed\n-- Defined-By: systemd\n-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel\n-- \n-- Unit docker.service has failed.\n-- \n-- The result is failed.\n")])])]),t("p",[a._v("原因：修改文件"),t("code",[a._v("/etc/docker/daemon.json")]),a._v("时不规范，可能存在空格什么的")]),a._v(" "),t("p",[a._v("解决：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat <<EOF >/etc/docker/daemon.json")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://registry.docker-cn.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" EOF\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat /etc/docker/daemon.json ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://registry.docker-cn.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# systemctl daemon-reload")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# systemctl restart docker")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-查询镜像无果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-查询镜像无果"}},[a._v("#")]),a._v(" 2.查询镜像无果？")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker search kafka")]),a._v("\nError response from daemon: Get "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://index.docker.io/v1/search?q=kafka&n=25"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" x509: certificate has expired or is not yet valid: current "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-22T02:08:25+08:00 is before "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("-02-22T00:00:00Z\n")])])]),t("p",[a._v("原因：虚拟机时间与外部时间不一致")]),a._v(" "),t("p",[a._v("解决：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# date")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("年 02月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v("日 星期三 02:09:50 CST\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ntpdate cn.pool.ntp.org")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("26")]),a._v(" Feb "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),a._v(":31:38 ntpdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("44996")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": step "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" server "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("119.28")]),a._v(".206.193 offset "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("386475.634457")]),a._v(" sec\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# date")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v("年 02月 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("26")]),a._v("日 星期日 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),a._v(":31:48 CST\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker search kafka")]),a._v("\nNAME                                         DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nbitnami/kafka                                Apache Kafka is a distributed streaming plat…   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("615")]),a._v("                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nubuntu/kafka                                 Apache Kafka, a distributed event streaming …   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v("                   \nbitnami/kafka-exporter                                                                       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9")]),a._v("                    \nibmcom/kafka                                 Docker Image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" IBM Cloud Private-CE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Commu…   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("                    \nbitnami/kafka-trigger-controller             Source "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" this controller is "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" the kubeles…   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("                    \nibmcom/kafka-python-console-sample           Docker image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" the IBM Event Streams Pytho…   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("                    \nopenwhisk/kafkaprovider                      Apache OpenWhisk event provider "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" …   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h3",{attrs:{id:"_3-docker容器内如何安装vim"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-docker容器内如何安装vim"}},[a._v("#")]),a._v(" 3.Docker容器内如何安装vim?")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("apt-get install vim  （可能提示你安装失败！继续往下）")])]),a._v(" "),t("li",[t("p",[a._v("agt-get update 同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引")]),a._v(" "),t("p",[a._v("配置国内镜像源：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"deb http://mirrors.163.com/debian/ jessie main non-free contrib"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/etc/apt/sources.list\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"deb http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/etc/apt/sources.list\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"deb-src http://mirrors.163.com/debian/ jessie main non-free contrib"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/etc/apt/sources.list\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"deb-src http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/etc/apt/sources.list\n")])])])]),a._v(" "),t("li",[t("p",[a._v("返回第一步")])])]),a._v(" "),t("h3",{attrs:{id:"_4-无法启动kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-无法启动kafka"}},[a._v("#")]),a._v(" 4.无法启动kafka?")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kafka.common.KafkaException: Socket server failed to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("bind")]),a._v(" to "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("150.158")]),a._v(".16.123:9092: 无法指定被请求的地址.\n        at kafka.network.Acceptor.openServerSocket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SocketServer.scala:327"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.network.Acceptor."),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("init"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SocketServer.scala:252"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.network.SocketServer"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("anonfun"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$startup")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(".apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SocketServer.scala:91"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.network.SocketServer"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("anonfun"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$startup")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(".apply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SocketServer.scala:83"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at scala.collection.mutable.ResizableArray"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$class")]),a._v(".foreach"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ResizableArray.scala:59"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at scala.collection.mutable.ArrayBuffer.foreach"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ArrayBuffer.scala:48"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.network.SocketServer.startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SocketServer.scala:83"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.server.KafkaServer.startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("KafkaServer.scala:222"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.server.KafkaServerStartable.startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("KafkaServerStartable.scala:38"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.Kafka$.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Kafka.scala:65"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at kafka.Kafka.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Kafka.scala"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n")])])]),t("p",[a._v("注意，上面是配置里面有个地址写得不对，listeners=PLAINTEXT://10.20.30.153:9092后接的是内网地址，通过ip addr即可查看，如我的机器")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221001140813960.png",alt:"image-20221001140813960"}})]),a._v(" "),t("p",[a._v("一个写内网地址，一个写外网地址")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221001140917719.png",alt:"image-20221001140917719"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);