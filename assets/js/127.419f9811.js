(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{517:function(t,s,a){"use strict";a.r(s);var e=a(1),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"yolo5æ¨¡å‹è®­ç»ƒå®æˆ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yolo5æ¨¡å‹è®­ç»ƒå®æˆ˜"}},[t._v("#")]),t._v(" YOLO5æ¨¡å‹è®­ç»ƒå®æˆ˜")]),t._v(" "),s("blockquote",[s("p",[t._v("ç¯å¢ƒï¼šcolab")]),t._v(" "),s("p",[t._v("æ•°æ®é›†è¿™é‡Œæ‰¾ï¼šhttps://universe.roboflow.com/")])]),t._v(" "),s("h2",{attrs:{id:"ä»£ç æ‹‰å–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç æ‹‰å–"}},[t._v("#")]),t._v(" ä»£ç æ‹‰å–")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("git clone https://github.com/ultralytics/yolov5\n%cd yolov5\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" requirements.txt\n")])])]),s("h2",{attrs:{id:"å®˜æ–¹ç¤ºä¾‹éªŒè¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®˜æ–¹ç¤ºä¾‹éªŒè¯"}},[t._v("#")]),t._v(" å®˜æ–¹ç¤ºä¾‹éªŒè¯")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("python detect.py "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--weights")]),t._v(" yolov5s.pt "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--source")]),t._v(" data/images\n")])])]),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Creating new Ultralytics Settings v0.0.6 file âœ… \nView Ultralytics Settings with 'yolo settings' or at '/root/.config/Ultralytics/settings.json'\nUpdate Settings with 'yolo settings key=value', i.e. 'yolo settings runs_dir=path/to/dir'. For help see https://docs.ultralytics.com/quickstart/#ultralytics-settings.\ndetect: weights=['yolov5s.pt'], source=data/images, data=data/coco128.yaml, imgsz=[640, 640], conf_thres=0.25, iou_thres=0.45, max_det=1000, device=, view_img=False, save_txt=False, save_format=0, save_csv=False, save_conf=False, save_crop=False, nosave=False, classes=None, agnostic_nms=False, augment=False, visualize=False, update=False, project=runs/detect, name=exp, exist_ok=False, line_thickness=3, hide_labels=False, hide_conf=False, half=False, dnn=False, vid_stride=1\nYOLOv5 ğŸš€ v7.0-453-geed9bc19 Python-3.12.12 torch-2.9.0+cu126 CUDA:0 (Tesla T4, 15095MiB)\n\nDownloading https://github.com/ultralytics/yolov5/releases/download/v7.0/yolov5s.pt to yolov5s.pt...\n100% 14.1M/14.1M [00:00&lt;00:00, 49.1MB/s]\n\nFusing layers... \nYOLOv5s summary: 213 layers, 7225885 parameters, 0 gradients, 16.4 GFLOPs\nimage 1/2 /content/yolov5/data/images/bus.jpg: 640x480 4 persons, 1 bus, 32.7ms\nimage 2/2 /content/yolov5/data/images/zidane.jpg: 384x640 2 persons, 2 ties, 32.9ms\nSpeed: 0.6ms pre-process, 32.8ms inference, 109.7ms NMS per image at shape (1, 3, 640, 640)\nResults saved to runs/detect/exp\n")])])]),s("p",[s("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/img/image-20260105132507654.png",alt:"image-20260105132507654"}})]),t._v(" "),s("h2",{attrs:{id:"è‡ªå®šä¹‰æ•°æ®é›†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰æ•°æ®é›†"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰æ•°æ®é›†")]),t._v(" "),s("p",[t._v("ä¸‹è½½")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" roboflow\nfrom roboflow "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" Roboflow\nrf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Roboflow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("api_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IpcOM2mvib9mZ1AZY7iT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nproject "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rf.workspace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"taisei"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"person-eccaa"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nversion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" project.version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndataset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" version.download"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yolov5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("å®Œæˆåï¼Œæ•°æ®é›†ä¼šæ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/img/image-20260105132815776.png",alt:"image-20260105132815776"}})]),t._v(" "),s("h2",{attrs:{id:"æ¨¡å‹è®­ç»ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡å‹è®­ç»ƒ"}},[t._v("#")]),t._v(" æ¨¡å‹è®­ç»ƒ")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("python train.py "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--device")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("640")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--batch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--epochs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" person-2/data.yaml "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--weights")]),t._v(" yolov5s.pt "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" yolo5_demo\n")])])]),s("p",[s("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/img/image-20260105133453705.png",alt:"image-20260105133453705"}})]),t._v(" "),s("h2",{attrs:{id:"æ¨¡å‹éªŒè¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡å‹éªŒè¯"}},[t._v("#")]),t._v(" æ¨¡å‹éªŒè¯")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" gradio as gr\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" torch\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" cv2\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" numpy as np\nfrom PIL "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" Image\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. åŠ è½½ YOLOv5 æ¨¡å‹")]),t._v("\nmodel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" torch.hub.load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ultralytics/yolov5'")]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'custom'")]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'runs/train/yolo5_demo/weights/best.pt'")]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("force_reload")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("False\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodel.conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç½®ä¿¡åº¦é˜ˆå€¼")]),t._v("\nmodel.iou "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.45")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NMS IoU é˜ˆå€¼")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. æ¨ç†å‡½æ•°")]),t._v("\ndef detect_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v('"\n    img: PIL Image\n    return: PIL Image with bbox\n    '),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v('"\n    '),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# PIL -> numpy")]),t._v("\n    img_np "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" np.array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# YOLOv5 æ¨ç†")]),t._v("\n    results "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img_np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ¸²æŸ“æ£€æµ‹æ¡†")]),t._v("\n    results.render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# numpy -> PIL")]),t._v("\n    result_img "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Image.fromarray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("results.ims"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" result_img\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. Gradio ç•Œé¢")]),t._v("\ndemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gr.Interface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("detect_image,\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("inputs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gr.Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pil"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("label")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä¸Šä¼ å›¾ç‰‡"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("outputs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gr.Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pil"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("label")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ£€æµ‹ç»“æœ"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YOLOv5 Person Detection Demo"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åŸºäº YOLOv5 + Gradio çš„ç›®æ ‡æ£€æµ‹æµ‹è¯•é¡µé¢"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4. å¯åŠ¨")]),t._v("\ndemo.launch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("True"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/img/image-20260105133758223.png",alt:"image-20260105133758223"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);