(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{536:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速"}},[s._v("#")]),s._v(" 镜像加速")]),s._v(" "),t("p",[s._v("参考\n"),t("a",{attrs:{href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"镜像拉取失败问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像拉取失败问题"}},[s._v("#")]),s._v(" 镜像拉取失败问题")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("报错如下：")]),s._v(" "),t("p",[s._v('Error response from daemon: Get "https://index.docker.io/v1/search?q=java&n=25": dial tcp 108.160.165.141:443: i/o timeout')])]),s._v(" "),t("p",[s._v("我遇到的问题是，能ping通外网，但就是"),t("code",[s._v("dokcer search xxx")]),s._v("不了，提示上面的错误，-_-||")]),s._v(" "),t("p",[s._v("网上各种方案尝试过，不大好使")]),s._v(" "),t("blockquote",[t("p",[s._v("采取"),t("code",[s._v("使用特定的镜像名称和标签进行拉取")]),s._v(",OK")])]),s._v(" "),t("p",[s._v("例如，执行docker pull openjdk:8-jre-alpine来拉取一个具体的 Java 镜像，而不是使用模糊的搜索后再拉取。")]),s._v(" "),t("p",[t("strong",[s._v("解决方案：更换为当前（2025年底）国内还能正常使用的镜像加速器。")])]),s._v(" "),t("h3",{attrs:{id:"推荐配置-ubuntu-系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推荐配置-ubuntu-系统"}},[s._v("#")]),s._v(" 推荐配置（Ubuntu 系统）")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("编辑 Docker 配置文件的（如果文件不存在就新建）：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/docker/daemon.json\n")])])])]),s._v(" "),t("li",[t("p",[s._v("写入以下内容（推荐多加几个源，提高可用性和速度，按优先级排序）：")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.1ms.run"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 毫秒镜像，速度快")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.xuanyuan.me"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 轩辕免费版")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://xuanyuan.cloud"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 轩辕专业版（需注册，但更稳定）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.1panel.live"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1Panel 官方")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://proxy.1panel.live"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.m.daocloud.io"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DaoCloud")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.nju.edu.cn"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 南京大学（部分可用）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.mirrors.sjtug.sjtu.edu.cn"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 上海交大")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("你可以只选前 3-5 个，避免太多导致配置复杂。")])])]),s._v(" "),t("li",[t("p",[s._v("保存退出后，重启 Docker 服务：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("验证配置是否生效：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" info "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" mirrors\n")])])]),t("p",[s._v("会显示你配置的镜像源列表。")])]),s._v(" "),t("li",[t("p",[s._v("测试拉取镜像：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull node:latest\n")])])]),t("p",[s._v("现在应该能正常下载了，速度也会明显更快。")])])]),s._v(" "),t("h3",{attrs:{id:"如果还是不行-备用方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如果还是不行-备用方案"}},[s._v("#")]),s._v(" 如果还是不行（备用方案）")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("临时单次拉取")]),s._v("（不改配置，直接用加速前缀）：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull docker.1ms.run/library/node:latest\n")])])]),t("p",[s._v("然后打 tag 成本地镜像：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag docker.1ms.run/library/node:latest node:latest\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("阿里云个人加速器")]),s._v("（最稳定，推荐生产用）：\n登录阿里云容器镜像服务 https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors ，左侧“镜像加速器”里会给你生成专属地址（类似 https://xxxxxx.mirror.aliyuncs.com），复制进去 daemon.json 即可。")])]),s._v(" "),t("li",[t("p",[s._v("如果你在虚拟机网络有问题，顺便检查下 DNS（不过这个错误主要是镜像源域名失效）：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/resolv.conf\n")])])]),t("p",[s._v("加一行："),t("code",[s._v("nameserver 8.8.8.8")]),s._v(" 或 "),t("code",[s._v("nameserver 114.114.114.114")])])])]),s._v(" "),t("p",[s._v("配置好后，拉取 node:latest 之类的镜像就没问题了。现在国内很多老的镜像源都失效了，记得用上面这些新的。")])])}),[],!1,null,null,null);t.default=e.exports}}]);