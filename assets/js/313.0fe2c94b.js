(window.webpackJsonp=window.webpackJsonp||[]).push([[313],{699:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"开启https访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启https访问"}},[a._v("#")]),a._v(" 开启HTTPS访问")]),a._v(" "),t("blockquote",[t("p",[a._v("申请了正规厂商颁发的域名证书后，可以按照以下步骤将其下载并配置到 Spring Boot 服务中。")])]),a._v(" "),t("h3",{attrs:{id:"_1-下载证书文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载证书文件"}},[a._v("#")]),a._v(" 1. 下载证书文件")]),a._v(" "),t("p",[a._v("证书颁发机构（CA）通常提供以下文件：")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("证书文件")]),a._v("（一般为 "),t("code",[a._v(".crt")]),a._v(" 或 "),t("code",[a._v(".cer")]),a._v(" 格式）")]),a._v(" "),t("li",[t("strong",[a._v("私钥文件")]),a._v("（"),t("code",[a._v(".key")]),a._v(" 格式）")]),a._v(" "),t("li",[t("strong",[a._v("证书链文件")]),a._v("（可能包含 CA 的中间证书，"),t("code",[a._v(".crt")]),a._v(" 文件）")])]),a._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/img/image-20241107015852182.png",alt:"image-20241107015852182"}})]),a._v(" "),t("p",[a._v("下载后，将证书文件和私钥文件保存在本地的安全位置。")]),a._v(" "),t("blockquote",[t("p",[a._v("注意：Spring Boot，直接支持的证书格式是 "),t("code",[a._v("PKCS12")]),a._v("（即 "),t("code",[a._v(".p12")]),a._v(" 或 "),t("code",[a._v(".pfx")]),a._v(" 文件）和 "),t("code",[a._v("JKS")]),a._v(" 格式。")])]),a._v(" "),t("h3",{attrs:{id:"_2-将证书转换为-p12-或-jks-格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-将证书转换为-p12-或-jks-格式"}},[a._v("#")]),a._v(" 2. 将证书转换为 "),t("code",[a._v(".p12")]),a._v(" 或 "),t("code",[a._v(".jks")]),a._v(" 格式")]),a._v(" "),t("p",[a._v("Spring Boot 使用 "),t("code",[a._v("PKCS12")]),a._v(" ("),t("code",[a._v(".p12")]),a._v(") 或 "),t("code",[a._v("JKS")]),a._v(" ("),t("code",[a._v(".jks")]),a._v(") 格式的密钥库文件，若证书是 "),t("code",[a._v(".crt")]),a._v(" 和 "),t("code",[a._v(".key")]),a._v(" 文件格式，可以使用 OpenSSL 将其转换为 "),t("code",[a._v(".p12")]),a._v(" 文件。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("openssl pkcs12 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" your_certificate.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inkey")]),a._v(" your_private.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" keystore.p12 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-name")]),a._v(" myalias "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAfile")]),a._v(" ca_bundle.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-caname")]),a._v(" root\n")])])]),t("p",[a._v("解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("-in")]),a._v("：你的域名证书文件")]),a._v(" "),t("li",[t("code",[a._v("-inkey")]),a._v("：私钥文件")]),a._v(" "),t("li",[t("code",[a._v("-out")]),a._v("：生成的 "),t("code",[a._v(".p12")]),a._v(" 文件名")]),a._v(" "),t("li",[t("code",[a._v("-name")]),a._v("：证书的别名")]),a._v(" "),t("li",[t("code",[a._v("-CAfile")]),a._v("：CA 提供的证书链文件")]),a._v(" "),t("li",[t("code",[a._v("-caname")]),a._v("：根证书的名称")])]),a._v(" "),t("p",[a._v("运行该命令后，系统会提示你输入一个密码。记住该密码，稍后需要用到。")]),a._v(" "),t("h3",{attrs:{id:"_3-配置-spring-boot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置-spring-boot"}},[a._v("#")]),a._v(" 3. 配置 Spring Boot")]),a._v(" "),t("p",[a._v("将生成的 "),t("code",[a._v(".p12")]),a._v(" 文件放置到 Spring Boot 项目中（例如 "),t("code",[a._v("src/main/resources")]),a._v(" 目录），然后在 "),t("code",[a._v("application.yml")]),a._v(" 或 "),t("code",[a._v("application.properties")]),a._v(" 中配置 HTTPS：")]),a._v(" "),t("h4",{attrs:{id:"在-application-yml-中配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-application-yml-中配置"}},[a._v("#")]),a._v(" 在 "),t("code",[a._v("application.yml")]),a._v(" 中配置")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ssl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key-store")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" classpath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("keystore.p12  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 密钥库路径")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key-store-password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_password"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 转换时设置的密码")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key-store-type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" PKCS12  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定密钥库类型")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key-alias")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"myalias"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 转换时设置的别名")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("上面这个“别名”可以不写。")])]),a._v(" "),t("h4",{attrs:{id:"在-application-properties-中配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-application-properties-中配置"}},[a._v("#")]),a._v(" 在 "),t("code",[a._v("application.properties")]),a._v(" 中配置")]),a._v(" "),t("div",{staticClass:"language-properties extra-class"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8443")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server.ssl.key-store")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("classpath:keystore.p12")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server.ssl.key-store-password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("your_password")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server.ssl.key-store-type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("PKCS12")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("server.ssl.key-alias")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("myalias")]),a._v("\n")])])]),t("h3",{attrs:{id:"_4-启动-spring-boot-应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动-spring-boot-应用"}},[a._v("#")]),a._v(" 4. 启动 Spring Boot 应用")]),a._v(" "),t("p",[a._v("配置完成后，启动 Spring Boot 应用。现在可以通过 "),t("code",[a._v("https://your-domain.com:端口号")]),a._v(" 访问服务。")]),a._v(" "),t("p",[a._v("这样，你的 Spring Boot 服务就可以安全地通过 HTTPS 提供服务了！")])])}),[],!1,null,null,null);t.default=r.exports}}]);