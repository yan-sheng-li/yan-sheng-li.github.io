(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{491:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"初学shell常用操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初学shell常用操作"}},[s._v("#")]),s._v(" 初学shell常用操作")]),s._v(" "),t("h2",{attrs:{id:"_1-格式化输出时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-格式化输出时间"}},[s._v("#")]),s._v(" 1.格式化输出时间")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo `date +%Y%m%d-%H:%M:%S`")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20221027")]),s._v("-10:30:56\n")])])]),t("p",[s._v("应用：记录日志，程序执行时间等等")]),s._v(" "),t("p",[s._v("举例：将程序的执行信息输出到指定的文件中")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log_file")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("logs/clear-dup-data-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H:%M:%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(".log\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  start_time-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H:%M:%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$log_file")]),s._v("\n/bin/python3 /clean_dup_data/main.py "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$log_file")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  end_time-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H:%M:%S"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$log_file")]),s._v("\n")])])]),t("h2",{attrs:{id:"_2-命令行操作文本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令行操作文本"}},[s._v("#")]),s._v(" 2.命令行操作文本")]),s._v(" "),t("p",[s._v("对每行匹配到的每一个字符串进行替换")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/原字符串/新字符串/'")]),s._v(" ab.txt  （"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v("也可以换成"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#"')]),s._v("）\n")])])]),t("p",[s._v("应用：直接搜索修改指定文件的位置，这样你就不用再cd 目录，然后vi 文件，等等这么麻烦了，在脚本中使用特别快捷")]),s._v(" "),t("p",[s._v("举例：使用命令行的形式去修改selinux配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/SELINUX=enforcing/SELINUX=disabled/'")]),s._v(" /etc/selinux/config\n")])])]),t("p",[s._v("指定分割点：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-12-centos ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname -I | awk '{print $1}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".16.12\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-12-centos ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname -I | awk '{print $1}' | awk -F . '{print $1}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])])]),t("h2",{attrs:{id:"_3-读取键盘输入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-读取键盘输入"}},[s._v("#")]),s._v(" 3.读取键盘输入")]),s._v(" "),t("p",[s._v("用到"),t("code",[s._v("read")]),s._v("来获取用户的输入")]),s._v(" "),t("p",[s._v("应用：脚本为了提高与用户的交互，有时候我们希望在脚本运行期间，读取用户的输入，如让用户输入账号，密码等。")]),s._v(" "),t("p",[s._v("参数说明：")]),s._v(" "),t("ul",[t("li",[s._v("-p 提示信息")]),s._v(" "),t("li",[s._v("-t 等待输入秒数")]),s._v(" "),t("li",[s._v("-n 接受指定的字符数便执行")]),s._v(" "),t("li",[s._v("-s 隐藏输入的字符")])]),s._v(" "),t("p",[s._v("举例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-16-12-centos demo4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# read -p 'enter your name:' name ; echo $name")]),s._v("\nenter your name:liming\nliming\n")])])]),t("h2",{attrs:{id:"_4-开发指定端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-开发指定端口"}},[s._v("#")]),s._v(" 4.开发指定端口")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221028104222903.png",alt:"image-20221028104222903"}})]),s._v(" "),t("p",[s._v("5.查看已开发端口")]),s._v(" "),t("p",[s._v("netstat -ntpl")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -ntpl")]),s._v("\nActive Internet connections "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only servers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:6379            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11780")]),s._v("/redis-server  \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9603")]),s._v("/sshd           \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:25            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9901")]),s._v("/master         \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::3306                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11707")]),s._v("/docker-proxy  \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::6379                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11780")]),s._v("/redis-server  \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::8080                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11871")]),s._v("/docker-proxy  \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::2389                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11822")]),s._v("/docker-proxy  \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9603")]),s._v("/sshd           \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ::1:25                  :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9901")]),s._v("/master         \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::42493                :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28129")]),s._v("/java          \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::2181                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28129")]),s._v("/java \n")])])]),t("p",[s._v("开发端口：")]),s._v(" "),t("p",[s._v("firewall-cmd --zone=public --add-port=9200/tcp --permanent")]),s._v(" "),t("p",[s._v("查看端口：")]),s._v(" "),t("p",[s._v("firewall-cmd --list-ports")]),s._v(" "),t("h2",{attrs:{id:"_5-命令行的特殊符号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-命令行的特殊符号"}},[s._v("#")]),s._v(" 5.命令行的特殊符号")]),s._v(" "),t("ul",[t("li",[t("code",[s._v(">")]),s._v(" ：输出重定向，将输出写入指定的文件（如果文件存在，则覆盖；否则创建文件）")]),s._v(" "),t("li",[t("code",[s._v(">>")]),s._v("：输出重定向，在指定的文件里面"),t("strong",[s._v("追加")]),s._v("输出的内容")]),s._v(" "),t("li",[t("code",[s._v("<")]),s._v("：输入重定向，后跟的文件取代键盘作为新的输入设备")]),s._v(" "),t("li",[t("code",[s._v("|")]),s._v("：管道，将上一条的命令作为下一条命令的输入参数")]),s._v(" "),t("li",[t("code",[s._v("||")]),s._v("：上一条命令执行失败后，就执行下一条")]),s._v(" "),t("li",[t("code",[s._v("&")]),s._v("：将任务放到后台执行")]),s._v(" "),t("li",[t("code",[s._v("&&")]),s._v("：上一条命令执行成功后，继续执行下一条，否则不往下")]),s._v(" "),t("li",[t("code",[s._v("0")]),s._v("：stdin 标准输入")]),s._v(" "),t("li",[t("code",[s._v("1")]),s._v("：stdout标准正确输出")]),s._v(" "),t("li",[t("code",[s._v("2")]),s._v("：stderr标准错误输出")]),s._v(" "),t("li",[t("code",[s._v("2>$1")]),s._v("：标准错误重新定向到标准输出")]),s._v(" "),t("li",[t("code",[s._v("1>$2")]),s._v("：标准输出重定向到标准错误")]),s._v(" "),t("li",[t("code",[s._v("/dev/null")]),s._v("：空设备文件（无底洞）")])]),s._v(" "),t("h2",{attrs:{id:"_6-虚拟机配置静态ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-虚拟机配置静态ip"}},[s._v("#")]),s._v(" 6.虚拟机配置静态IP")]),s._v(" "),t("p",[s._v("背景：主要解决每次虚拟机开机后，IP就变换了，不利于finalshell连接，每次都得修改IP麻烦。")]),s._v(" "),t("p",[s._v("查看VM的网络配置。")]),s._v(" "),t("p",[s._v("首先VM=》编辑 =》 虚拟网络编辑器")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221030165854873.png",alt:"image-20221030165854873"}})]),s._v(" "),t("p",[s._v("选择NAT类型这行，然后打开设置")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221030165930597.png",alt:"image-20221030165930597"}})]),s._v(" "),t("p",[s._v("根据下图修改网卡配置文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221030165950728.png",alt:"image-20221030165950728"}})]),s._v(" "),t("p",[s._v("修改网卡配置："),t("code",[s._v("vi /etc/sysconfig/network-scripts/ifcfg-ens33")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ethernet"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PROXY_METHOD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"none"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BROWSER_ONLY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("static  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#这个配置修改为"static"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEFROUTE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV4_FAILURE_FATAL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6_AUTOCONF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6_DEFROUTE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6_FAILURE_FATAL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6_ADDR_GEN_MODE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stable-privacy"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ens33"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UUID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"38fab940-4871-41f9-b1e1-3f123c3bc217"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ens33"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#修改为"yes",代表每次开机后开启')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".220.137 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#你要设置的IP")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#子网掩码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GATEWAY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.168")]),s._v(".220.2 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#网关")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".8.8 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#域名解析器地址")]),s._v("\n")])])]),t("p",[s._v("保存，重启网卡："),t("code",[s._v("systemctl restart network")])]),s._v(" "),t("p",[s._v("再次查看IP地址："),t("code",[s._v("ip addr")]),s._v("，可见ip修改成静态的OK了。")]),s._v(" "),t("p",[s._v("7.添加自启动服务")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zookeeper init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim zookeeper ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chkconfig:2345 20 90")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#description:zookeeper")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#processname:zookeeper")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/aspire/product/mirror/java/jdk1.8.0_131\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n        start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"require start|stop|status|restart"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),t("h2",{attrs:{id:"_7-添加开机启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-添加开机启动服务"}},[s._v("#")]),s._v(" 7.添加开机启动服务")]),s._v(" "),t("blockquote",[t("p",[s._v("方式1：将应用做成服务，以“开机启动zookeeper”为例")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在"),t("code",[s._v("/etc/rc.d/init.d/")]),s._v("目录下，创建zookeeper服务文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/rc.d/init.d/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nfunctions  netconsole  network  README  zookeeper\n")])])])]),s._v(" "),t("li",[t("p",[s._v("将服务文件设置为可执行文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod +x zookeeper")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("编辑服务文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chkconfig:2345 20 90")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#description:zookeeper")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#processname:zookeeper")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/aspire/product/mirror/java/jdk1.8.0_131\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n        start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" /opt/aspire/product/mirror/zookeeper/zookeeper-3.4.10/bin/zkServer.sh restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"require start|stop|status|restart"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n\n")])])])]),s._v(" "),t("li",[t("p",[s._v("测试启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service zookeeper start")]),s._v("\n")])])]),t("p",[s._v("ok的")])]),s._v(" "),t("li",[t("p",[s._v("添加到开机启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig --add zookeeper ")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("查看开机启动列表")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig --list")]),s._v("\nnetconsole      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\nnetwork         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\nzookeeper       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":开    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\n")])])]),t("blockquote",[t("p",[s._v("方式2：直接修改**/etc/rc.d/rc.local文件**")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng init.d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/rc.d/rc.local ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This script will be executed *after* all the other init scripts.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can put your own initialization stuff in here if you don't")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# want to do the full Sys V style init stuff.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /var/lock/subsys/local\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/java/jdk1.8.0_112\n/usr/local/zookeeper-3.4.5/bin/zkServer.sh start\n")])])]),t("p",[s._v("保存，重启即生效。")])])]),s._v(" "),t("h2",{attrs:{id:"_8-systemctl-添加开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-systemctl-添加开机启动"}},[s._v("#")]),s._v(" 8.systemctl 添加开机启动")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("进入目录"),t("code",[s._v("/lib/systemd/system")])])]),s._v(" "),t("li",[t("p",[s._v("编辑服务文件"),t("code",[s._v("xxx.service")])])]),s._v(" "),t("li",[t("p",[s._v("保存，执行"),t("code",[s._v("systemctl daemon-reload")]),s._v("，使新增的服务生效")])]),s._v(" "),t("li",[t("p",[s._v("设置开机启动"),t("code",[s._v("systemctl enable xxx.service")])])]),s._v(" "),t("li",[t("p",[s._v("查看服务状态"),t("code",[s._v("systemctl status xxx.service")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("simple\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/gopath/bin/xxx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/gopath/bin/xxx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/gopath/bin/xxx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RemainAfterExit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestartSec")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])])])]),s._v(" "),t("h2",{attrs:{id:"_9-超简洁获取ip地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-超简洁获取ip地址"}},[s._v("#")]),s._v(" 9.超简洁获取IP地址")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),s._v("\n")])])]),t("h2",{attrs:{id:"_10-便捷快速文件传输-scp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-便捷快速文件传输-scp"}},[s._v("#")]),s._v(" 10.便捷快速文件传输-scp")]),s._v(" "),t("p",[s._v("语法如下：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("usage: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-346BCpqrTv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-c cipher"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-F ssh_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-i identity_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-J destination"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-l limit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-o ssh_option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-P port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-S program"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". target\n")])])]),t("ul",[t("li",[t("p",[s._v("本机 =》 远程")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" local_file remote_username@remote_ip:remote_folder \n或者 \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" local_file remote_username@remote_ip:remote_file \n")])])])]),s._v(" "),t("li",[t("p",[s._v("远程 =》 本机")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v("  remote_username@remote_ip:remote_folder local_file\n或者 \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v("  remote_username@remote_ip:remote_file local_file\n")])])])])]),s._v(" "),t("p",[s._v("注意：\n1.当远程服务器防火墙有特殊限制时，scp要走特殊端口(#scp 命令使用端口号 4588)\n2.注意所使用的用户是否具有可读取远程服务器相应文件的权限")]),s._v(" "),t("h2",{attrs:{id:"_11-set-e-用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-set-e-用法"}},[s._v("#")]),s._v(" 11. set  e 用法")]),s._v(" "),t("ul",[t("li",[s._v("set -e 之后出现的代码，一但出现返回值非零（脚本出错），整个脚本立即退出。")]),s._v(" "),t("li",[s._v("set +e 则 即使基本有报错，但是仍继续执行下面的脚本。")])]),s._v(" "),t("h2",{attrs:{id:"_12-z-str"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-z-str"}},[s._v("#")]),s._v(" 12.-z str")]),s._v(" "),t("p",[s._v("如果str长度为零为真")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://cdn.qiniu.liyansheng.top/typora/image-20221116122413712.png",alt:"image-20221116122413712"}})]),s._v(" "),t("h2",{attrs:{id:"_13-shift用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-shift用法"}},[s._v("#")]),s._v(" 13.shift用法")]),s._v(" "),t("p",[s._v("当传入多个参数时，shift前$1可用，shift后原来的$1不可用，原来的$2变成$1，$#获取参数个数会相应-1")]),s._v(" "),t("h2",{attrs:{id:"_14-source用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-source用法"}},[s._v("#")]),s._v(" 14.source用法")]),s._v(" "),t("ul",[t("li",[s._v("刷新当前环境")]),s._v(" "),t("li",[s._v("source 执行shell脚本")]),s._v(" "),t("li",[s._v("从脚本中导入shell函数")]),s._v(" "),t("li",[s._v("从另一个脚本读取变量")])]),s._v(" "),t("h2",{attrs:{id:"_15-command-v-参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15-command-v-参数"}},[s._v("#")]),s._v(" 15.command -v 参数")]),s._v(" "),t("p",[s._v("判断一个命令是否支持")]),s._v(" "),t("h2",{attrs:{id:"_16-自动化配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_16-自动化配置"}},[s._v("#")]),s._v(" 16.自动化配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng target-config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat application-prod.yml | grep brokers | awk '{print $2}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.12")]),s._v(".7.116:9092\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng target-config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat application-prod.yml | grep zk-nodes | awk '{print $2}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.12")]),s._v(".7.116:2181\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng target-config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat application-prod.yml | grep preferred-networks | awk '{print $2}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.12")]),s._v(".7\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liyansheng target-config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat application-prod.yml | grep defaultZone | awk '{print $2}'| awk '{print $1}'")]),s._v("\nhttp://10.12.7.115:8761/eureka/\n\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);