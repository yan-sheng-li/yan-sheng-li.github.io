(window.webpackJsonp=window.webpackJsonp||[]).push([[405],{795:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"é¡¹ç›®ä»npmåˆ°pnpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®ä»npmåˆ°pnpm"}},[s._v("#")]),s._v(" é¡¹ç›®ä»npmåˆ°pnpm")]),s._v(" "),a("blockquote",[a("p",[s._v("Vite + Vue 3 é¡¹ç›®ä» npm åˆ‡æ¢åˆ° pnpm æ˜¯éå¸¸å¸¸è§ä¸”æ¨èçš„åšæ³•ã€‚pnpm é€Ÿåº¦æ›´å¿«ã€ç£ç›˜ç©ºé—´å ç”¨æ›´å°‘ï¼ˆé€šè¿‡ç¡¬é“¾æ¥å…±äº« node_modulesï¼‰ï¼Œå°¤å…¶é€‚åˆä¸­å¤§å‹é¡¹ç›®ã€‚")])]),s._v(" "),a("h3",{attrs:{id:"åˆ‡æ¢æ­¥éª¤-è¶…çº§ç®€å•-åŸºæœ¬æ— é£é™©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ‡æ¢æ­¥éª¤-è¶…çº§ç®€å•-åŸºæœ¬æ— é£é™©"}},[s._v("#")]),s._v(" åˆ‡æ¢æ­¥éª¤ï¼ˆè¶…çº§ç®€å•ï¼ŒåŸºæœ¬æ— é£é™©ï¼‰")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("åˆ é™¤æ—§çš„é”æ–‡ä»¶å’Œ node_modules")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" node_modules\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" package-lock.json   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm çš„é”æ–‡ä»¶ï¼Œå¿…é¡»åˆ ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœæœ‰ yarn.lock ä¹Ÿåˆ æ‰ï¼ˆè™½ç„¶ä½ ç”¨çš„æ˜¯ npmï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" yarn.lock "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("/dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("å®‰è£… pnpmï¼ˆå¦‚æœä½ è¿˜æ²¡è£…ï¼‰")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ¨èæ–¹å¼ï¼ˆå®˜æ–¹æ¨èï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æˆ–è€…ç”¨ corepackï¼ˆNode.js 16.13+ è‡ªå¸¦ï¼‰")]),s._v("\ncorepack "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("\ncorepack prepare pnpm@latest "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--activate")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("ç”¨ pnpm é‡æ–°å®‰è£…ä¾èµ–")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),a("p",[s._v("ç¬¬ä¸€æ¬¡æ‰§è¡Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–°æ–‡ä»¶ï¼š")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("pnpm-lock.yaml")]),s._v("ï¼ˆpnpm çš„é”æ–‡ä»¶ï¼Œä»¥åè¦æäº¤åˆ° gitï¼‰")]),s._v(" "),a("li",[a("code",[s._v("pnpm-workspace.yaml")]),s._v("ï¼ˆå¦‚æœæœ‰ monorepo æ‰ä¼šç”Ÿæˆï¼Œå•é¡¹ç›®ä¸€èˆ¬æ²¡æœ‰ï¼‰")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("ä¿®æ”¹ package.json ä¸­çš„è„šæœ¬ï¼ˆæ¨èï¼Œä½†ä¸æ˜¯å¿…é¡»ï¼‰")]),s._v("\npnpm æ”¯æŒç›´æ¥ç”¨ "),a("code",[s._v("pnpm dev")]),s._v("ã€"),a("code",[s._v("pnpm build")]),s._v(" ç­‰ä»£æ›¿ "),a("code",[s._v("pnpm run xxx")]),s._v("ï¼Œä½†ä¸ºäº†ä¿æŒå’ŒåŸæ¥ä¸€è‡´ï¼Œå»ºè®®æŠŠ scripts æ”¹æˆæ”¯æŒä¸¤è€…ï¼š")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vite"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vite build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"preview"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vite preview"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("è¿™æ ·ä½ æ—¢å¯ä»¥ç”¨ "),a("code",[s._v("npm run dev")]),s._v("ï¼ˆå…¶å®è°ƒç”¨ pnpmï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ "),a("code",[s._v("pnpm dev")]),s._v("ï¼Œéƒ½å¾ˆæ–¹ä¾¿ã€‚")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("æäº¤åˆ° gitï¼ˆé‡è¦ï¼ï¼‰")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" pnpm-lock.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" package-lock.json\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœä½ æƒ³å¼ºåˆ¶å›¢é˜Ÿéƒ½ç”¨ pnpmï¼Œå¯ä»¥åŠ  .npmrc æ–‡ä»¶")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lockfile: true"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" .npmrc\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-linker=hoisted"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" .npmrc  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¯é€‰ï¼šè®© node_modules ç»“æ„æ›´æ¥è¿‘ npmï¼Œä¾¿äºä¸€äº›å·¥å…·å…¼å®¹")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"å›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹"}},[s._v("#")]),s._v(" å›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹")]),s._v(" "),a("ul",[a("li",[s._v("å‘Šè¯‰å›¢é˜Ÿæˆå‘˜ä¹Ÿåˆ‡æ¢åˆ° pnpmï¼Œæˆ–è€…è‡³å°‘è®©ä»–ä»¬åˆ æ‰ package-lock.jsonï¼Œåªä¿ç•™ pnpm-lock.yamlã€‚")]),s._v(" "),a("li",[s._v("å¦‚æœæœ‰äººè¿˜æ˜¯ç”¨ npm installï¼Œä¼šé‡æ–°ç”Ÿæˆ package-lock.jsonï¼Œå®¹æ˜“é€ æˆé”æ–‡ä»¶å†²çªã€‚è§£å†³åŠæ³•ï¼š\n"),a("ul",[a("li",[s._v("åœ¨é¡¹ç›®æ ¹ç›®å½•åŠ ä¸€ä¸ª "),a("code",[s._v(".npmrc")]),s._v(" æ–‡ä»¶ï¼š"),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("package-lock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("lockfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("false")]),s._v("\n")])])]),s._v("è¿™æ ·å³ä½¿æœ‰äººç”¨ npm å®‰è£…ï¼Œä¹Ÿä¸ä¼šç”Ÿæˆ package-lock.jsonã€‚")])])])]),s._v(" "),a("h3",{attrs:{id:"åˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„"}},[s._v("#")]),s._v(" åˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("pnpm install")]),s._v(" é€šå¸¸æ¯” npm å¿« 2-5 å€")]),s._v(" "),a("li",[s._v("å¤šä¸ªé¡¹ç›®å…±äº«åŒä¸€ä¸ªä¾èµ–å­˜å‚¨ï¼ˆå…¨å±€ storeï¼‰ï¼Œç£ç›˜ç©ºé—´å¤§å¹…èŠ‚çœ")]),s._v(" "),a("li",[s._v("æ›´ä¸¥æ ¼çš„ä¾èµ–è§£æï¼Œé¿å… phantom dependenciesï¼ˆå¹»å½±ä¾èµ–ï¼‰")])]),s._v(" "),a("h3",{attrs:{id:"æ€»ç»“-ä¸€å¥è¯æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“-ä¸€å¥è¯æ“ä½œ"}},[s._v("#")]),s._v(" æ€»ç»“ï¼šä¸€å¥è¯æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" node_modules package-lock.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),a("hr"),s._v(" "),a("p",[s._v("ğŸ“Œå¯èƒ½é‡åˆ°é—®é¢˜ï¼š")]),s._v(" "),a("p",[s._v("ä¸‹è½½æ…¢ï¼Ÿ")]),s._v(" "),a("blockquote",[a("p",[s._v("æ¢é•œåƒï¼ˆæ¨èï¼‰ï¼šç”¨æ·˜å®é•œæˆ–è…¾è®¯é•œåŠ é€Ÿã€‚")])]),s._v(" "),a("p",[s._v("åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ .npmrc æ–‡ä»¶é‡ŒåŠ ï¼š")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("registry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npmmirror.com/\n")])])]),a("p",[s._v("æˆ–è€…ä¸´æ—¶å‘½ä»¤ï¼š"),a("code",[s._v("pnpm install --registry https://registry.npmmirror.com")])]),s._v(" "),a("p",[s._v("å¦‚æœä¸æƒ³çœ‹è­¦å‘Šï¼Œå¯ä»¥è°ƒé«˜é˜ˆå€¼ï¼ˆåœ¨ .npmrc åŠ ï¼‰ï¼š")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("textfetch-min-speed-kibps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŠŠæœ€ä½é€Ÿåº¦è°ƒä½")]),s._v("\nfetch-warn-timeout-ms"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30000")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŠŠè¶…æ—¶è­¦å‘Šè°ƒåˆ°30ç§’")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);