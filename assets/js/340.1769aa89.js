(window.webpackJsonp=window.webpackJsonp||[]).push([[340],{730:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"整合xxl-job定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#整合xxl-job定时任务"}},[t._v("#")]),t._v(" 整合xxl-job定时任务")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/xuxueli/xxl-job",target:"_blank",rel:"noopener noreferrer"}},[t._v("仓库"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_1-引入-xxl-job-依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-引入-xxl-job-依赖"}},[t._v("#")]),t._v(" 1. 引入 XXL-JOB 依赖")]),t._v(" "),a("p",[t._v("在 pom.xml 文件中添加 XXL-JOB 的依赖：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.xuxueli"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("xxl-job-core"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.3.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"_2-配置-xxl-job-调度中心地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-xxl-job-调度中心地址"}},[t._v("#")]),t._v(" 2. 配置 XXL-JOB 调度中心地址")]),t._v(" "),a("p",[t._v("在 application.properties 或 application.yml 中，配置 XXL-JOB 执行器相关信息：\napplication.properties")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行器 AppName")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.executor.appname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("yourAppName")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行器的注册地址，默认IP为空则自动获取本机IP")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.executor.ip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行器的端口号（默认8080，可以自定义）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.executor.port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("9999")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 调度中心的地址（多个调度中心用逗号分隔）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.admin.addresses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http://127.0.0.1:8080/xxl-job-admin")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行器日志路径")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.executor.logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/data/applogs/xxl-job/jobhandler")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行器日志保留天数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.executor.logretentiondays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("30")]),t._v("\n")])])]),a("p",[t._v("application.yml")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("xxl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("admin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("addresses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8080/xxl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("admin "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 调度中心地址")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("executor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("appname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yourAppName  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行器的名字")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义IP，留空则自动获取")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9999")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义端口号")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /data/applogs/xxl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("job/jobhandler "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志路径")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logretentiondays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志保留天数")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-创建-xxl-job-配置类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建-xxl-job-配置类"}},[t._v("#")]),t._v(" 3. 创建 XXL-JOB 配置类")]),t._v(" "),a("p",[t._v("编写 XXL-JOB 的配置类，启动 XXL-JOB 的执行器：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("impl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlJobSpringExecutor")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlJobConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlJobSpringExecutor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("xxlJobExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"XXL-JOB executor init."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlJobSpringExecutor")]),t._v(" xxlJobSpringExecutor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlJobSpringExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAdminAddresses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:8080/xxl-job-admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAppname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yourAppName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9999")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLogPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/applogs/xxl-job/jobhandler"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLogRetentionDays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" xxlJobSpringExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-编写任务-handler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-编写任务-handler"}},[t._v("#")]),t._v(" 4. 编写任务 Handler")]),t._v(" "),a("p",[t._v("在 Spring Boot 中创建处理 XXL-JOB 调度的任务 Handler：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlJob")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stereotype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyJobHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@XxlJob")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myJobHandler"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myJobHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"XXL-JOB task executing..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行任务的具体逻辑")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-配置-xxl-job-调度中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置-xxl-job-调度中心"}},[t._v("#")]),t._v(" 5. 配置 XXL-JOB 调度中心")]),t._v(" "),a("p",[t._v("确保你已经搭建了 XXL-JOB 的调度中心，并且在 xxl-job-admin 项目中已经配置了相关调度任务。访问 http://localhost:8080/xxl-job-admin，使用账号登录后，添加调度任务，配置 JobHandler 为 myJobHandler，并设置相关的 cron 表达式等参数。")]),t._v(" "),a("h2",{attrs:{id:"_6-启动项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动项目"}},[t._v("#")]),t._v(" 6. 启动项目")]),t._v(" "),a("p",[t._v("在配置好后，启动 Spring Boot 项目，你的 XXL-JOB 应该能够正常工作，并可以在 XXL-JOB 管理后台中查看任务执行情况。")]),t._v(" "),a("h2",{attrs:{id:"_7-测试任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-测试任务"}},[t._v("#")]),t._v(" 7. 测试任务")]),t._v(" "),a("p",[t._v("通过 XXL-JOB 管理后台手动触发或通过定时任务触发，查看日志和结果输出，确保任务正常运行。")]),t._v(" "),a("h2",{attrs:{id:"应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),a("ol",[a("li",[t._v("定时任务执行")])]),t._v(" "),a("p",[t._v("在实际项目中，经常会有需要定时执行的任务，XXL-JOB 提供了精确的定时调度能力，适用于各种定时任务场景：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("定时数据备份：每天定时备份数据库数据到云存储或本地服务器。\n报表生成：每月或每季度自动生成业务报表，例如销售报表、财务报表等，并通过邮件或其他渠道发送给相关负责人。\n清理日志文件：定期清理过期的日志文件、临时文件，避免占用大量存储空间。\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("分布式任务调度")])]),t._v(" "),a("p",[t._v("当单台服务器的资源不足以处理复杂任务时，XXL-JOB 的分布式执行能力可以将任务分发到多个执行器节点，实现大规模任务的并发处理：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("电商系统的订单处理：对于大规模电商系统，订单的创建、支付、发货、库存管理等业务可以分发到不同节点执行，保证系统高效处理订单。\n日志分析任务：将大量日志分析任务分发到多个服务器节点，通过分布式处理提升任务的处理速度和效率。\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("批量数据处理")])]),t._v(" "),a("p",[t._v("对于大批量的数据处理操作，XXL-JOB 可以帮助系统自动化处理这些任务，特别是大数据平台或数据仓库中的批处理任务：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("数据清洗和同步：每天定时清洗业务系统中的数据，将清洗后的数据同步到数据仓库或数据湖中，为数据分析提供基础数据。\n批量导入数据：例如将用户行为数据、交易记录等批量导入到数据库中。\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("异步任务处理")])]),t._v(" "),a("p",[t._v("在实际开发中，某些耗时的任务可以通过 XXL-JOB 实现异步执行，避免阻塞主业务流程：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("邮件或短信通知：用户注册、下单、支付等操作后，通过 XXL-JOB 异步发送邮件或短信通知，提升用户体验和系统响应速度。\n用户积分计算：用户在某个时段完成了某项活动后，积分计算可以通过异步任务在后台完成。\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("多系统联动任务")])]),t._v(" "),a("p",[t._v("在企业系统中，经常需要多个子系统之间进行任务联动。例如，电商系统和仓储系统需要在订单处理、发货环节协同工作。XXL-JOB 可以用于在不同系统之间协同执行任务：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("ERP 系统和库存管理系统联动：当订单产生后，XXL-JOB 调度任务通知库存管理系统更新库存。\nCRM 系统和营销系统联动：定期从 CRM 系统中获取用户信息并推送到营销系统进行用户营销活动。\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("周期性数据同步")])]),t._v(" "),a("p",[t._v("在多个系统之间，需要定期同步数据，保持数据的一致性，XXL-JOB 可以实现这样的任务调度：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("数据库之间的数据同步：定期将主数据库的数据同步到备份数据库中，或将不同业务系统的数据库之间的数据同步。\n系统对接中的数据同步：在微服务架构中，不同服务之间的数据同步，可以通过定时任务来实现，比如将订单数据同步到财务系统。\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("文件处理任务")])]),t._v(" "),a("p",[t._v("一些与文件相关的任务可以通过 XXL-JOB 自动化处理：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("文件上传/下载：定期从 FTP 服务器下载文件或将本地文件上传到远程服务器。\n日志文件压缩：定时将系统生成的日志文件压缩归档，减少服务器存储空间。\n")])])]),a("ol",{attrs:{start:"8"}},[a("li",[a("p",[t._v("消息推送和提醒")]),t._v(" "),a("p",[t._v("营销消息推送：针对会员用户，可以通过 XXL-JOB 定时向他们发送促销活动信息或节日祝福短信，提升用户粘性。\n提醒类业务：例如到期提醒、事件通知等，XXL-JOB 可以通过定时任务触发邮件、短信、App 消息推送等。")])]),t._v(" "),a("li",[a("p",[t._v("第三方接口调用")])])]),t._v(" "),a("p",[t._v("定时或者批量调用第三方 API 或内部接口，确保与外部系统的数据交换和同步：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("第三方物流信息同步：定时调用物流公司的接口，获取包裹的物流状态并更新到系统中。\n财务系统对账：每天自动对接银行、支付平台的对账接口，进行对账处理，自动生成报表。\n")])])]),a("ol",{attrs:{start:"10"}},[a("li",[t._v("业务规则检查和警告")])]),t._v(" "),a("p",[t._v("对某些业务规则进行定期检查，并在异常情况下自动发出警告或执行自动化处理：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("库存预警：定期检查库存，如果发现库存不足，自动触发补货流程或发送预警。\n财务预警：定期扫描账单或交易记录，如果发现异常情况（如超额支付等），自动触发警报。\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);